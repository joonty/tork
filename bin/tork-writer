#!/usr/bin/env ruby
=begin =======================================================================

# TORK-WRITER 1 2012-09-26 18.2.3

## NAME

tork-writer - copies stdin to tork-reader(1)

## SYNOPSIS

`tork-writer` [*OPTION*]...

## DESCRIPTION

This program continuously copies lines from its stdin to a tork-reader(1)
instance that is running in the same working directory as this program.

## OPTIONS

`-h`, `--help`
  Show this help manual.

## SEE ALSO

tork-reader(1)

=end =========================================================================

$0 = File.basename(__FILE__) # for easier identification in ps(1) output

require 'binman'
BinMan.help

require 'socket'
begin
  UNIXSocket.open('.tork.us') do |socket|
    while line = STDIN.gets
      socket.puts line
    end
  end
rescue Errno::ENOENT
  warn "#{$0}: could not connect to tork-reader(1)"
  exit false
end
